---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "lakekeeper_warehouse Resource - terraform-provider-lakekeeper"
subcategory: ""
description: |-
  The lakekeeper_warehouse resource allows to manage the lifecycle of a lakekeeper warehouse.
  Upstream API: Lakekeeper REST API docs https://docs.lakekeeper.io/docs/nightly/api/management/#tag/warehouse
---

# lakekeeper_warehouse (Resource)

The `lakekeeper_warehouse` resource allows to manage the lifecycle of a lakekeeper warehouse.

**Upstream API**: [Lakekeeper REST API docs](https://docs.lakekeeper.io/docs/nightly/api/management/#tag/warehouse)

## Example Usage

```terraform
resource "lakekeeper_project" "bi" {
  name = "bi"
}

# create a warehouse: S3 storage with Access Key
resource "lakekeeper_warehouse" "aws" {
  project_id     = lakekeeper_project.bi.id
  name           = "aws"
  protected      = false
  active         = true
  managed_access = true
  storage_profile = {
    s3 = {
      region = "us-east-1"
      bucket = "mybucket"
      credential = {
        access_key = {
          access_key_id     = "AKIAEXAMPLE1234567890"
          secret_access_key = "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"
        }
      }
    }
  }
  delete_profile = {
    type               = "soft"
    expiration_seconds = 3600
  }
}

# Create a warehouse: GCS with Service Account Key
resource "lakekeeper_warehouse" "gcs" {
  project_id     = lakekeeper_project.bi.id
  name           = "gcs"
  protected      = false
  active         = true
  managed_access = false
  storage_profile = {
    gcs = {
      bucket = "mybucket"
      credential = {
        service_account_key = {
          key = file("key.json")
        }
      }
    }
  }
  delete_profile = {
    type               = "soft"
    expiration_seconds = 3600
  }
}

# Create a warehouse: ADLS with Azure System Identity
resource "lakekeeper_warehouse" "adls" {
  project_id     = lakekeeper_project.bi.id
  name           = "adls"
  protected      = false
  active         = true
  managed_access = false
  storage_profile = {
    adls = {
      account_name = "myaccount"
      filesystem   = "fs"
      credential = {
        azure_system_identity = {}
      }
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the warehouse to create. Must be unique within a project and may not contain "/"
- `project_id` (String) The project ID to which the warehouse belongs.
- `storage_profile` (Attributes) Configure the storage profile. Only one Of `s3`, `adls` or `gcs` must be provided. (see [below for nested schema](#nestedatt--storage_profile))

### Optional

- `active` (Boolean) Whether the warehouse is active. Default is `true`.
- `delete_profile` (Attributes) The delete profile for the warehouse. It can be either a soft or hard delete profile. Default: `hard` (see [below for nested schema](#nestedatt--delete_profile))
- `managed_access` (Boolean) Whether the managed access is configured on this warehouse. Default is `false`.
- `protected` (Boolean) Whether the warehouse is protected from being deleted. Default is `false`.

### Read-Only

- `id` (String) The internal ID of this resource. In the form: `{{project_id}}/{{warehouse_id}}`
- `warehouse_id` (String) The ID of the warehouse.

<a id="nestedatt--storage_profile"></a>
### Nested Schema for `storage_profile`

Optional:

- `adls` (Attributes) ADLS storage profile. Suitable for Azure Data Lake Storage Gen2. (see [below for nested schema](#nestedatt--storage_profile--adls))
- `gcs` (Attributes) GCS storage profile. Designed for use with Google Cloud Storage (see [below for nested schema](#nestedatt--storage_profile--gcs))
- `s3` (Attributes) S3 storage profile. Suitable for AWS or any service compatible with the S3 API. (see [below for nested schema](#nestedatt--storage_profile--s3))

<a id="nestedatt--storage_profile--adls"></a>
### Nested Schema for `storage_profile.adls`

Required:

- `account_name` (String) Name of the azure storage account.
- `credential` (Attributes) Configure the credentials to access the ADLS storage. One of `shared_access_key`, `client_credentials` or `azure_system_identity` must be provided. (see [below for nested schema](#nestedatt--storage_profile--adls--credential))
- `filesystem` (String) Name of the adls filesystem, in blobstorage also known as container.

Optional:

- `allow_alternative_protocols` (Boolean) Allow alternative protocols such as wasbs:// in locations. This is disabled by default. We do not recommend to use this setting except for migration.
- `authority_host` (String) The authority host to use for authentication. Defaults to `https://login.microsoftonline.com`.
- `host` (String) The host to use for the storage account. Defaults to `dfs.core.windows.net`.
- `key_prefix` (String) Subpath in the filesystem to use.
- `sas_token_validity_seconds` (Number) The validity of the sas token in seconds. Default is `3600`.

<a id="nestedatt--storage_profile--adls--credential"></a>
### Nested Schema for `storage_profile.adls.credential`

Optional:

- `azure_system_identity` (Attributes) Authenticate to ADLS with Azure System Identity (see [below for nested schema](#nestedatt--storage_profile--adls--credential--azure_system_identity))
- `client_credentials` (Attributes) Authenticate to ADLS with Client Credentials (see [below for nested schema](#nestedatt--storage_profile--adls--credential--client_credentials))
- `shared_access_key` (Attributes) Authenticate to ADLS with Shared Access Key (see [below for nested schema](#nestedatt--storage_profile--adls--credential--shared_access_key))

<a id="nestedatt--storage_profile--adls--credential--azure_system_identity"></a>
### Nested Schema for `storage_profile.adls.credential.azure_system_identity`

Read-Only:

- `enabled` (Boolean) This is just an helper to check if the Azure System Identity is activated for this storage profile.


<a id="nestedatt--storage_profile--adls--credential--client_credentials"></a>
### Nested Schema for `storage_profile.adls.credential.client_credentials`

Required:

- `client_id` (String, Sensitive)
- `client_secret` (String, Sensitive)
- `tenant_id` (String, Sensitive)


<a id="nestedatt--storage_profile--adls--credential--shared_access_key"></a>
### Nested Schema for `storage_profile.adls.credential.shared_access_key`

Required:

- `key` (String, Sensitive) The shared access key. Required for `azure-shared-access-key` credentials.




<a id="nestedatt--storage_profile--gcs"></a>
### Nested Schema for `storage_profile.gcs`

Required:

- `bucket` (String) The bucket name.
- `credential` (Attributes) Configure the credentials to access the GCS storage. One of `service_account_key` or `gcp_system_identity` must be provided. (see [below for nested schema](#nestedatt--storage_profile--gcs--credential))

Optional:

- `key_prefix` (String) Subpath in the filesystem to use.

<a id="nestedatt--storage_profile--gcs--credential"></a>
### Nested Schema for `storage_profile.gcs.credential`

Optional:

- `gcp_system_identity` (Attributes) Authenticate to the GCS bucket with GCP System Identity (see [below for nested schema](#nestedatt--storage_profile--gcs--credential--gcp_system_identity))
- `service_account_key` (Attributes) Authenticate to the GCS bucket with a Service Account Key (see [below for nested schema](#nestedatt--storage_profile--gcs--credential--service_account_key))

<a id="nestedatt--storage_profile--gcs--credential--gcp_system_identity"></a>
### Nested Schema for `storage_profile.gcs.credential.gcp_system_identity`

Read-Only:

- `enabled` (Boolean) This is just an helper to check if the GCP System Identity is activated for this storage profile.


<a id="nestedatt--storage_profile--gcs--credential--service_account_key"></a>
### Nested Schema for `storage_profile.gcs.credential.service_account_key`

Required:

- `key` (String, Sensitive) Required for `service-account-key` credentials.




<a id="nestedatt--storage_profile--s3"></a>
### Nested Schema for `storage_profile.s3`

Required:

- `bucket` (String) The bucket name for the storage profile.
- `credential` (Attributes) Configure the credentials to access the S3 storage. Only one of `access_key`, `cloudflare_r2` or `aws_system_identity` must be provided. (see [below for nested schema](#nestedatt--storage_profile--s3--credential))
- `region` (String) Region to use for S3 requests.
- `sts_enabled` (Boolean) Whether to enable STS for S3 storage profile. Required if the storage type is `s3`. If enabled, the `sts_role_arn` or `assume_role_arn` must be provided.

Optional:

- `allow_alternative_protocols` (Boolean) Allow `s3a://`, `s3n://`, `wasbs://` in locations. This is disabled by default. We do not recommend to use this setting except for migration.
- `assume_role_arn` (String) Optional ARN to assume when accessing the bucket from Lakekeeper for S3 storage profile
- `aws_kms_key_arn` (String) ARN of the KMS key used to encrypt the S3 bucket, if any.
- `endpoint` (String) Optional endpoint to use for S3 requests, if not provided the region will be used to determine the endpoint. If both region and endpoint are provided, the endpoint will be used. Example: `http://s3-de.my-domain.com:9000`
- `flavor` (String) S3 flavor to use. Defaults to `aws`.
- `key_prefix` (String) Subpath in the filesystem to use.
- `path_style_access` (Boolean) Path style access for S3 requests. If the underlying S3 supports both, we recommend to not set path_style_access.
- `push_s3_delete_disabled` (Boolean) Controls whether the `s3.delete-enabled=false` flag is sent to clients.
- `remote_signing_url_style` (String) S3 URL style detection mode for remote signing. One of `auto`, `path-style`, `virtual-host`. Default: `auto`.
- `sts_role_arn` (String)
- `sts_token_validity_seconds` (Number) The validity of the STS tokens in seconds. Default is `3600`.

<a id="nestedatt--storage_profile--s3--credential"></a>
### Nested Schema for `storage_profile.s3.credential`

Optional:

- `access_key` (Attributes) Authenticate to the S3 bucket with an Access Key (see [below for nested schema](#nestedatt--storage_profile--s3--credential--access_key))
- `aws_system_identity` (Attributes) Authenticate to the S3 bucket with AWS System Identity (see [below for nested schema](#nestedatt--storage_profile--s3--credential--aws_system_identity))
- `cloudflare_r2` (Attributes) Authenticate to a Cloudflare R2 Bucket (see [below for nested schema](#nestedatt--storage_profile--s3--credential--cloudflare_r2))

<a id="nestedatt--storage_profile--s3--credential--access_key"></a>
### Nested Schema for `storage_profile.s3.credential.access_key`

Required:

- `access_key_id` (String, Sensitive) The access key ID. Required for `aws-access-key` credentials.
- `secret_access_key` (String, Sensitive) The secret access key. Required for `aws-access-key` credentials.

Optional:

- `external_id` (String, Sensitive) The external ID.


<a id="nestedatt--storage_profile--s3--credential--aws_system_identity"></a>
### Nested Schema for `storage_profile.s3.credential.aws_system_identity`

Required:

- `external_id` (String, Sensitive) Required for `aws-system-identity` credentials


<a id="nestedatt--storage_profile--s3--credential--cloudflare_r2"></a>
### Nested Schema for `storage_profile.s3.credential.cloudflare_r2`

Required:

- `access_key_id` (String, Sensitive) Access key ID used for IO operations of Lakekeeper
- `account_id` (String, Sensitive) Cloudflare account ID, used to determine the temporary credentials
- `secret_access_key` (String, Sensitive) Secret key associated with the access key ID
- `token` (String, Sensitive) Token associated with the access key ID





<a id="nestedatt--delete_profile"></a>
### Nested Schema for `delete_profile`

Optional:

- `expiration_seconds` (Number) When the types is `soft`. Entity will be deleted after `expiration_seconds`. Default is `3600`
- `type` (String) Type of the delete profile. Can be `hard` or `soft`
